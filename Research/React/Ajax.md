__[02.React_Router](./React_Router.md)__

---

# __Ajax__

## __1. Ajax란?__
#### Asynchronous JavaScript and XML의 약자로,
#### 빠르게 동작하는 동적인 웹 페이지를 만들기 위한 개발 기법의 하나이다.

<br>

#### Ajax는 웹 페이지 전체를 리로드하지 않아도 웹 페이지의 일부분만은 갱신할 수 있다.
#### 즉 Ajax를 이용하면 백그라운드 영역에서 서버와 통신하여 그 결과를 웹 페이지의 일부분에만 표시할 수 있다.

<br>

#### 이 때 서버는 아래와 같은 다양한 형태의 데이터를 주고받을 수 있다.
>#### JSON
>#### XML
>#### HTML
>#### 텍스트 파일

<br>


### __(2) Ajax의 장점__
#### Ajax를 이용하면 다음과 같은 장점이 있다.
#### __1. 웹 페이지 전체를 리로드하지 않고도 웹 페이지의 일부분만을 갱신할 수 있다.__
#### __2. 웹 페이지가 로드된 후에 서버로 데이터 요청을 보낼 수 있다.__
#### __3. 웹 페이지가 로드된 후에 서버로부터 데이터를 받을 수 있다.__
#### __4. 백그라운드 영역에서 서버로 데이터를 보낼 수 있다.__

<br>

### __(3) Ajax의 한계__
#### __1. Ajax는 클라이언트가 서버에 데이터를 요청하는 클라이언트 풀링 방식을 사용하므로, 서버 푸시 방식의 실시간 서비스는 만들 수 없다.__
#### __2. Ajax로는 바이너리 데이터를 보내거나 받을 수 없다.__
#### __3. Ajax 스크립트가 포함된 서버가 아닌 다른 서버로 Ajax 요청을 보낼 수 없다.__
#### __4. 클라이언트의 PC로 Ajax 요청을 보낼 수 없다.__

<br>

>#### __여기서 클라이언트 풀링 방식이란?__
>#### 사용자가 직접 원하는 정보를 서버에게 요청하여 얻는 방식을 의미한다.
>#### 이에 반해 서버 푸시(server push) 방식이란 사용자가 요청하지 않아도 서버가 알아서 자동으로 특정 정보를 제공하는 것을 의미한다.
>#### 요즘 스마트폰에서 각종 앱이 보내는 푸시 알림이 서버 푸시 방식의 대표적인 예이다.

<br>

---

<br>

### __(4) Ajax 프레임워크__
#### Ajax를 이용하여 개발을 손쉽게 할 수 있도록 여러가지 기능을 포함해놓은 개발 환경을 의미한다.
#### 가장 많이 사용되는 프레임워크는 다음과 같다.
>#### Prototype
>#### script.aculo.us
>#### dojo
>#### jQuery

<br>

---

<br>

## __2. Ajax 동작원리__
#### Ajax에서 사용하는 기존 기술을 아래와 같다.
#### 1. 웹 페이지의 표현을 위한 HTML과 CSS
#### 2. 데이터에 접근하거나 화면 구성을 동적으로 조작하기 위해 사용되는 DOM 모델
#### 3. 데이터의 교환을 위한 JSON이나 XML
#### 4. 웹 서버와의 비동기식 통신을 위한 XMLHttpRequest 객체
#### 5. 위에서 언급한 모든 기술을 결합하여 사용자의 작업 흐름을 제어하는 데 사용되는 자바스크립트

<br>

### __(1) Ajax 동작 원리__
#### Ajax를 이용한 웹 응용 프로그램은 자바스크립트 코드를 통해 웹 서버와 통신을 하게 된다.
#### 따라서 사용자의 동작에는 영향을 주지 않으면서도 백그라운드에서 지속해서 서버와 통신할 수 있다.

![ajax][ajax]

[ajax]: ./img/ajax.png "ajax"

#### 위 그림의 동작원리는 아래와 같은 순서로 진행된다.
#### 1. 사용자에 의한 요청 이벤트가 발생한다.
#### 2. 요청 이벤트가 발생하면 이벤트 핸들러에 의해 자바스크립트가 호출된다.
#### 3. 자바스크립트는 XMLHttpRequest 객체를 사용하여 서버로 요청을 보낸다.
#### 이 때 웹 브라우저는 요청을 보내고 나서 서버의 응답을 기다릴 필요없이 다른 작업을 처리할 수 있다.
#### 4. 서버는 전달받은 XMLHttpRequest 객체를 가지고 Ajax 요청을 처리한다.
#### 5-6. 서버는 처리한 결과를 HTML, XML 또는 JSON 형태의 데이터로 웹 브라우저에 전달한다.
#### 7. 서버로부터 전달받은 데이터를 가지고 웹 페이지의 일부분만을 갱신하는 자바스크립트를 호출한다.
#### 8. 결과적으로 웹 페이지의 일부분만이 다시 로딩되어 표시된다.

<br>

---

<br>

## __3. XMLHttpRequest 객체__
#### Ajax의 가장 핵심적인 구성 요소는 XMLHttpRequest 객체이다.
#### 웹 브라우저가 서버와 데이터를 교환할 때 사용되는데
#### 웹 브라우저가 백그라운드에서 계속해서 서버와 통신할 수 있는 것도 이 객체를 사용하기 때문이다.

<br>

#### 현재 대부분의 주요 웹 브라우저는 XMLHttpRequest 객체를 내장하고 있다.
#### 이런 XMLHttpRequest 객체를 생성하는 방법은 브라우저의 종류에 따라 다음과 같이 나뉜다.

<br>

#### <i> XMLHttpRequest 객체를 이용한 방법 </i>
#### <i> ActiveXObject 객체를 이용한 방법 </i>

<br>

#### 익스플로러7과 그 이상의 버전, 크롬, 파이어폭스, 사파리, 오페라에서는 XMLHttpRequest 객체를 사용한다.
>#### var 변수 이름 = new XMLHttpRequest();

<br>

#### 하지만 익스플로러의 구형 버전인 5와 6 버전에서는 ActiveXObject 객체를 사용해야 한다.
>#### var 변수 이름 = new ActiveXObject("Microsoft.XMLHTTP");

<br>

#### 따라서 모든 웹 브라우저에서 XMLHttpRequest 인스턴스를 제대로 생성하기 위해서는 다음과 같이 작성해야 한다.
```js
var httpRequest;
function createRequest() {
  if(window.XMLHttpRequest) // 익스플로러 7과 그 이상의 버전, 크롬, 파이어폭스, 사파리, 오페라 등
    return new XMLHttpRequest();
} else { // 익스플로러 6과 그 이하의 버전
  return new ActiveXObject("Microsoft.XMLHTTP");
}
```
#### 하지만 현재 익스플로러6과 그 이하 버전을 사용하는 사용자는 거의 없으므로 우리는 XMLHttpRequest 객체만을 사용할 것이다.

<br>

---

<br>

## __3. 서버에 요청하기__
#### 그렇다면 계속 언급되는 서버에 요청하는 것이란 어떻게 하는걸까?
#### 앞서 말했듯  Ajax에서는 XMLHttpRequest 객체를 사용하여 서버와 데이터를 교환하기에
#### 서버에 요청을 보내기 위해서는 XMLHttpRequest 인스턴스를 생성해야 한다.
#### XMLHttpRequest 인스턴스의 open() 메소드와 send() 메소드를 사용하여 요청을 보낼 수 있다.

<br>

### __(1) open() 메소드__
#### open() 메소드는 서버로 보낼 Ajax 요청의 형식을 설정한다.
```javascript
open(전달방식, URL 주소, 동기여부);
```
#### 전달방식은 요청을 전달할 방식으로 GET 방식과 POST 방식 중 하나를 선택할 수 있다.
#### URL 주소는 요청을 처리할 서버의 파일 주소를 전달한다.
#### 동기 여부는 요청을 동기식으로 전달할지 비동기식으로 전달할지를 전달한다.

<br>

### __(2) send() 메소드__
#### send() 메소드는 작성된 Ajax 요청을 서버로 전달한다.
#### 이 메소드는 전달 방식에 따라 인수를 가질 수도, 안 가질 수도 있다.
```javascript
send(); // GET 방식
send(문자열); // POST 방식
```

<br>

### __(3) GET 방식과 POSt 방식__
#### __(3-1) GEt 방식__
#### 주소에 데이터(data)를 추가하여 전달하는 방식이다.
#### GET 방식의 HTTP 요청은 브라우저에 의해 캐시되어(cashed) 저장된다.
#### 또한 GET 방식은 보통 쿼리 문자열(query string)에 포함되어 전솔되므로 길이의 제한이 있다.
#### 따라서 보안상 취약점이 존재하므로 중요한 데이터는 POST 방식을 사용하여 요청하는 것이 좋다.